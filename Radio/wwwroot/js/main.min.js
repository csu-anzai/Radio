function onYouTubeIframeAPIReady(){function o(){n.start().then(function(){n.invoke("Connected")})}function s(t){t.data===YT.PlayerState.PLAYING?(i||n.invoke("Played"),i=!0):t.data===YT.PlayerState.PAUSED&&(i=!1)}function e(){function n(n){$.get("/Track/Current",n)}function t(n){$.get("/Track/Queue",n)}n(function(n){t(function(t){function i(n,t){f.append($(`<li class="${n}">${t}</li>`))}f.empty();i("list-group-item active rounded-0",n.title);for(const n of t)i("list-group-item",n.title)})})}onYouTubeIframeAPIReady=undefined;let t,i=!1,r;const n=(new signalR.HubConnectionBuilder).withUrl("/radio").build();n.on("UpdateTrack",function(n){i&&(t.loadVideoById(n),r=n,e())});n.on("SyncVideo",function(n,i){r===n?t.seekTo(i):(t.loadVideoById(n,i),r=n);e()});t=new YT.Player("player",{width:"100%",height:"100%",playerVars:{controls:1,disablekb:1,fs:0,iv_load_policy:3},events:{onReady:o,onStateChange:s}});const u=$("div.track-list"),f=u.find("ul");(function(){function r(){i?(n.removeClass("video-and-track-list"),n.addClass("video-only"),t.removeClass("active"),u.css("display","none")):(n.addClass("video-and-track-list"),n.removeClass("video-only"),t.addClass("active"),u.css("display",""));i=!i}const n=$("main"),t=$("#track-list-toggle"),f=t.find("a");let i=!1;r();f.click(r)})()}